{"mappings":"AAkBe,MAAAA,EAKbC,YAAmBC,EAA0BC,EAAoBC,EAAqB,G,KAAnEF,a,KAA0BC,O,KAAoBC,aAC/DC,KAAKH,WAAaA,EAClBG,KAAKF,KAAOA,EACZE,KAAKD,WAAaA,EAClBC,KAAKC,OAAOD,KAAKF,MACjBE,KAAKE,mB,CAGPC,iBAAiBL,GAEf,MAAO,8BADgBA,IAASE,KAAKF,KAAO,SAAW,wBACUA,cAAiBA,iB,CAGpFM,mBAKE,OAHEJ,KAAKH,WAAaG,KAAKD,WACnBC,KAAKH,WACLG,KAAKD,U,CAIbM,MAAMA,GACJ,MAAMC,EAAiB,GACjBC,EAAqB,GAC3B,IAAK,IAAIT,EAAOO,EAAOP,EAAOE,KAAKI,mBAAqBC,EAAOP,IAC7DS,EAASC,KAAKV,GACdQ,EAAKE,KAAKR,KAAKG,iBAAiBL,IAGlC,OADAE,KAAKO,SAAUA,EACRD,EAAKG,KAAK,G,CAGnBR,OAAOH,GACL,MAAMS,EAAWP,KAAKK,MAAMP,GAEtBY,EAA4BC,SAASC,cAAc,oBACzDF,EAAQG,mBAAmB,YAAaN,GAExCP,KAAKc,QAAUJ,C,CAGjBK,aAAajB,GACRA,EAAOE,KAAKH,YAAcC,EAAO,IACpCE,KAAKc,QAAQE,UAAYhB,KAAKK,MAAMP,G,CAGtCI,oBACE,MAAMe,EAAmBjB,KAAKc,QAAQI,WAAWN,cAAc,SACzDO,EAAmBnB,KAAKc,QAAQI,WAAWN,cAAc,SAE/DK,EAAKG,iBAAiB,SAAS,KAC7BpB,KAAKqB,UAAU,IAEjBF,EAAKC,iBAAiB,SAAS,KAC7BpB,KAAKsB,UAAU,IAGjBtB,KAAKc,QAAQM,iBAAiB,SAAUG,IACtC,MAAMC,EAA2BD,EAAIE,OAAOC,QAAQ,SACpD,IAAKF,EACH,OAEF,MAAMG,EAAoBC,SAASJ,EAAYK,QAAQF,WAEvD3B,KAAK8B,QAAQH,EAAU,G,CAI3BG,QAAQH,GACN,GAAIA,IAAc3B,KAAKF,KAAM,OAC7B,GAAG6B,EAAY3B,KAAKH,YAAc8B,EAAY,EAAG,OACjD,MAAMI,EAAyBpB,SAASC,cAAc,gBAElDmB,GACFA,EAAWC,UAAUC,OAAO,UAGGtB,SAASC,cAAc,qBAAqBe,OACjEK,UAAUE,IAAI,UAE1BlC,KAAKF,KAAO6B,C,CAGdN,WACE,MAAMA,EAAmBrB,KAAKF,KAAO,EACjCuB,EAAWc,KAAKC,OAAOpC,KAAKO,WAC9BP,KAAKe,aAAaM,GAAUrB,KAAKD,WAAW,IAE9CC,KAAK8B,QAAQT,E,CAGfC,WACE,MAAMA,EAAmBtB,KAAKF,KAAO,EAChCwB,EAAWa,KAAKE,OAAOrC,KAAKO,WAC/BP,KAAKe,aAAaO,GAEpBtB,KAAK8B,QAAQR,E,ECpHjBgB,MAAM,oIAA2I,CAC/IC,QAAS,CACPC,cAAiB,6NACjBC,OAAQ,sBAETC,MAAKC,GAAQA,EAAKC,SAAQF,MAAKC,IAChCE,QAAQC,IAAIH,GAMd,SAAkBA,GAChB,MAAMI,EAAa,IAAIpD,EAAWgD,EAAKK,YAAaL,EAAK7C,MACzDmD,EAAKC,UAAUH,EAAWjC,QAAQqC,S,CAP3BC,CAAST,MAIlB,MAAMM,EAAoBtC,SAASC,cAAc","sources":["src/ts/pagination.ts","src/index.ts"],"sourcesContent":["// interface Pag {\n//   totalPages: number,\n//   page: number,\n//   showedPage: number, \n//   listPage:number[],\n// }\n\n// export default class Pagination {\n//   listPage:number[];\n//   element:HTMLUListElement\n//   constructor({totalPages: number,page: number,showedPage: number = 5}:Pag) {\n//     this.totalPages = totalPages;\n//     this.page = page;\n//     this.showedPage = showedPage;\n//     this.render(this.page)\n//     this.addEventListeners()\n//   }\n\nexport default class Pagination {\n\n  listPage:number[];\n  element:HTMLUListElement\n\n  constructor(public totalPages: number,public page: number,public showedPage: number = 5) {\n    this.totalPages = totalPages;\n    this.page = page;\n    this.showedPage = showedPage;\n    this.render(this.page)\n    this.addEventListeners()\n  }\n  \n  getTeamplateList(page: number) {\n    const active: string = page === this.page ? 'active' : ''\n    return `<li class=\"pagination page ${active}\" data-page-index=\"${page}\"><button>${page}</button></li>`\n  }\n  \n  showedCountPages() {\n    const counterPages:number =\n      this.totalPages < this.showedPage\n        ? this.totalPages\n        : this.showedPage;\n    return counterPages;\n  }\n  \n  pages(pages:number) {\n    const list: string[] = [];\n    const listPage: number[] = [];\n    for (let page = pages; page < this.showedCountPages() + pages; page++) {     \n      listPage.push(page)\n      list.push(this.getTeamplateList(page))\n    }\n    this.listPage= listPage\n    return list.join('')\n  }\n  \n  render(page: number) {\n    const listPage = this.pages(page)\n    \n    const wrapper: HTMLUListElement = document.querySelector('.pagination-list')\n    wrapper.insertAdjacentHTML('beforeend', listPage)\n\n    this.element = wrapper\n  }\n  \n  upDateRender(page: number){\n    if(page > this.totalPages || page < 1) return\n    this.element.innerHTML = this.pages(page)\n  }\n\n  addEventListeners() {\n    const next:HTMLElement = this.element.parentNode.querySelector('.next') \n    const prev:HTMLElement = this.element.parentNode.querySelector('.prev') \n    \n    next.addEventListener('click', () => {\n      this.nextPage()\n    })\n    prev.addEventListener('click', () => {\n      this.prevPage()\n    })\n\n    this.element.addEventListener('click', (evt) => {\n      const carrentPage: HTMLElement = evt.target.closest('.page')\n      if (!carrentPage) {\n        return\n      };\n      const pageIndex: number = parseInt(carrentPage.dataset.pageIndex)\n      \n      this.setPage(pageIndex)\n    })\n  }\n  \n  setPage(pageIndex: number) {\n    if (pageIndex === this.page) return\n    if(pageIndex > this.totalPages || pageIndex < 1) return\n    const activePage:HTMLElement = document.querySelector('.page.active') \n    \n    if (activePage) {\n      activePage.classList.remove('active')\n    }\n    \n    const carrentPage: HTMLElement = document.querySelector(`[data-page-index=\"${pageIndex}\"]`)\n    carrentPage.classList.add('active')\n    \n    this.page = pageIndex\n  }\n\n  nextPage() {\n    const nextPage: number = this.page + 1\n    if (nextPage > Math.max(...this.listPage)) {\n      this.upDateRender(nextPage-(this.showedPage-1))\n    }\n    this.setPage(nextPage)\n  }\n\n  prevPage() {\n    const prevPage: number = this.page - 1\n    if ( prevPage < Math.min(...this.listPage)) {\n      this.upDateRender(prevPage)\n    }\n    this.setPage(prevPage)\n  }\n}","import Pagination from './ts/pagination'\nconst key: string = \"ef54c316f166b2a5913791e8b3f63a4a\"\nconst page: number = 1;\nfetch(`https://api.themoviedb.org/3/discover/movie?include_adult=false&include_video=false&language=en-US&page=${page}&sort_by=popularity.desc`, {\n  headers: {\n    \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlZjU0YzMxNmYxNjZiMmE1OTEzNzkxZThiM2Y2M2E0YSIsInN1YiI6IjY0NzBkZmZhYzVhZGE1MDBjMWEzNzhmMiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.fljmrABHLVGUf2e0aWKvdHeTeR0ruZNkP26DhsQLuYM\",\n    accept: 'application/json'\n  }\n}).then(data => data.json()).then(data => {\n  console.log(data)\n  return showPage(data)\n})\n\n\nconst list: HTMLElement = document.querySelector('.pagination-container')\nfunction showPage(data:any) {\n  const pagination = new Pagination(data.total_pages, data.page)\n  list.append(...pagination.element.children)\n};\n"],"names":["$57b577c912f01405$export$2e2bcd8739ae039","constructor","totalPages","page","showedPage","this","render","addEventListeners","getTeamplateList","showedCountPages","pages","list","listPage","push","join","wrapper","document","querySelector","insertAdjacentHTML","element","upDateRender","innerHTML","next","parentNode","prev","addEventListener","nextPage","prevPage","evt","carrentPage","target","closest","pageIndex","parseInt","dataset","setPage","activePage","classList","remove","add","Math","max","min","fetch","headers","Authorization","accept","then","data","json","console","log","pagination","total_pages","$1e6a16da88d577c6$var$list","append","children","$1e6a16da88d577c6$var$showPage"],"version":3,"file":"index.0facd9d5.js.map"}